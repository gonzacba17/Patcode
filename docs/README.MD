# üß† PatCode

### Tu asistente de programaci√≥n local impulsado por Ollama

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.9%2B-blue)
![Ollama](https://img.shields.io/badge/ollama-compatible-green)

---

## üìñ √çndice

1. [Introducci√≥n](#-introducci√≥n)
2. [Caracter√≠sticas principales](#-caracter√≠sticas-principales)
3. [Instalaci√≥n](#-instalaci√≥n)
4. [Uso](#-uso)
5. [Estructura del c√≥digo](#-estructura-del-c√≥digo)
6. [Pruebas](#-pruebas)
7. [Contribuciones](#-contribuciones)
8. [Licencia](#-licencia)

---

## üéØ Introducci√≥n

**PatCode** es un asistente de programaci√≥n local que replica las funcionalidades de Claude Code de Anthropic, pero completamente **offline**, utilizando modelos de lenguaje de [Ollama](https://ollama.ai/) (como Llama 3.2, Mistral, CodeLlama, entre otros).

### ¬øPor qu√© PatCode?

La motivaci√≥n detr√°s de PatCode surge de la necesidad de contar con un asistente de programaci√≥n que:

- **No dependa de la nube**: Funciona completamente offline, ideal para desarrolladores que trabajan en ambientes sin conexi√≥n o con restricciones de seguridad.
- **Preserve la privacidad**: Todo el c√≥digo y las conversaciones permanecen en tu m√°quina local, sin enviar datos a servicios externos.
- **Sea accesible**: No requiere suscripciones ni cuotas de uso, solo necesitas hardware local suficiente para ejecutar modelos de Ollama.
- **Est√© disponible 24/7**: Sin l√≠mites de rate-limiting ni dependencias de servicios remotos.

PatCode te permite interactuar con tu c√≥digo de manera natural, pedir explicaciones, recibir sugerencias de mejora, depurar errores y aprender nuevos conceptos, todo desde la comodidad de tu terminal.

---

## ‚ú® Caracter√≠sticas principales

### üí¨ Interacci√≥n Natural
Escribe preguntas o instrucciones como si hablaras con otro programador. PatCode entiende contexto y puede mantener conversaciones t√©cnicas fluidas.

**Ejemplo:**
```
T√∫: ¬øC√≥mo puedo leer un archivo JSON en Python?
PatCode: Puedes usar el m√≥dulo 'json'...
```

### üß† Memoria Persistente
PatCode recuerda el contexto de tus √∫ltimas conversaciones, permitiendo mantener di√°logos coherentes a lo largo de m√∫ltiples sesiones. La memoria se almacena en `agents/memory/memory.json`.

### üîç An√°lisis de C√≥digo
Copia fragmentos de c√≥digo o describe tu problema, y PatCode te ofrecer√°:
- Explicaciones detalladas de c√≥mo funciona el c√≥digo
- Sugerencias de mejora y optimizaci√≥n
- Identificaci√≥n de errores y bugs potenciales
- Refactorizaci√≥n de c√≥digo

### ‚öôÔ∏è 100% Local
Funciona completamente offline usando tu modelo Ollama preferido (por ejemplo, `llama3.2:latest`, `codellama`, `mistral`). No requiere conexi√≥n a internet para funcionar.

### üîí Privado y Seguro
Ning√∫n dato, c√≥digo o conversaci√≥n sale de tu equipo. Ideal para trabajar con c√≥digo propietario o confidencial sin preocupaciones de seguridad.

### üé® Personalizable
Puedes cambiar el modelo de lenguaje seg√∫n tus necesidades, ajustar la cantidad de contexto hist√≥rico y personalizar el comportamiento del asistente.

---

## üöÄ Instalaci√≥n

### Requisitos previos

Antes de instalar PatCode, aseg√∫rate de tener:

1. **Python 3.9 o superior**
   - Descarga desde [python.org](https://www.python.org/downloads/)
   - Verifica la instalaci√≥n:
     ```bash
     python --version
     ```

2. **Ollama instalado y en ejecuci√≥n**
   - Descarga desde [ollama.ai](https://ollama.ai/)
   - Verifica que Ollama est√© funcionando:
     ```bash
     ollama list
     ```
   - Deber√≠as ver una lista de modelos disponibles:
     ```
     NAME              ID              SIZE      MODIFIED
     llama3.2:latest   a80c4f17acd5    2.0 GB    5 days ago
     ```

3. **Git** (opcional, para clonar el repositorio)

---

### Instalaci√≥n en Windows

1. **Clonar el repositorio:**
   ```cmd
   git clone https://github.com/gonzacba17/Patcode.git
   cd Patcode
   ```

2. **Crear un entorno virtual:**
   ```cmd
   python -m venv venv
   venv\Scripts\activate
   ```

3. **Instalar dependencias:**
   ```cmd
   pip install -r requirements.txt
   ```

4. **Crear estructura de directorios (si no existe):**
   ```cmd
   mkdir agents\memory
   ```

5. **Ejecutar PatCode:**
   ```cmd
   python main.py
   ```

---

### Instalaci√≥n en macOS / Linux

1. **Clonar el repositorio:**
   ```bash
   git clone https://github.com/gonzacba17/Patcode.git
   cd Patcode
   ```

2. **Crear un entorno virtual:**
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **Instalar dependencias:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Crear estructura de directorios (si no existe):**
   ```bash
   mkdir -p agents/memory
   ```

5. **Ejecutar PatCode:**
   ```bash
   python main.py
   ```

---

### Configuraci√≥n de Ollama

Si no tienes un modelo descargado, puedes obtener uno con:

```bash
# Para uso general de c√≥digo
ollama pull llama3.2

# O para tareas espec√≠ficas de programaci√≥n
ollama pull codellama

# O Mistral para espa√±ol
ollama pull mistral
```

Para verificar que el servicio de Ollama est√° activo:

```bash
curl http://localhost:11434/api/tags
```

---

## üíª Uso

### Iniciar el asistente

Ejecuta el archivo principal desde tu terminal:

```bash
python main.py
```

Ver√°s el mensaje de bienvenida:

```
ü§ñ Bienvenido a PatCode (versi√≥n local con Ollama)

T√∫: 
```

### Ejemplos de interacci√≥n

#### Ejemplo 1: Explicar conceptos
```
T√∫: ¬øQu√© son los decoradores en Python?
PatCode: Los decoradores en Python son funciones que modifican el comportamiento 
de otras funciones o m√©todos. Se utilizan con la sintaxis @decorator...
```

#### Ejemplo 2: An√°lisis de c√≥digo
```
T√∫: Explicame este c√≥digo:
def factorial(n):
    return 1 if n == 0 else n * factorial(n-1)

PatCode: Este c√≥digo implementa una funci√≥n recursiva para calcular el factorial 
de un n√∫mero. Si n es 0, retorna 1 (caso base). En caso contrario, multiplica 
n por el factorial de n-1...
```

#### Ejemplo 3: Depuraci√≥n
```
T√∫: Mi c√≥digo da error "IndexError: list index out of range". ¬øQu√© significa?

PatCode: Este error significa que est√°s intentando acceder a una posici√≥n en 
una lista que no existe. Por ejemplo, si tienes una lista de 3 elementos e 
intentas acceder al √≠ndice 5...
```

#### Ejemplo 4: Sugerencias de mejora
```
T√∫: ¬øC√≥mo puedo hacer este c√≥digo m√°s eficiente?
for i in range(len(lista)):
    print(lista[i])

PatCode: Puedes simplificar este c√≥digo usando iteraci√≥n directa sobre la lista:
for elemento in lista:
    print(elemento)
Esto es m√°s Pythonic y eficiente...
```

### Comandos disponibles

- **Salir del asistente:** Escribe `salir`, `exit` o `quit`
- **Nueva conversaci√≥n:** Simplemente comienza a escribir, el contexto se mantiene autom√°ticamente
- **C√≥digo multil√≠nea:** Puedes pegar c√≥digo directamente en la terminal

---

## üìÅ Estructura del c√≥digo

```
PatCode/
‚îÇ
‚îú‚îÄ‚îÄ main.py                      # Punto de entrada principal
‚îú‚îÄ‚îÄ requirements.txt             # Dependencias del proyecto
‚îú‚îÄ‚îÄ README.md                    # Documentaci√≥n (este archivo)
‚îÇ
‚îú‚îÄ‚îÄ agents/                      # M√≥dulos de agentes IA
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ pat_agent.py            # L√≥gica principal del asistente
‚îÇ   ‚îî‚îÄ‚îÄ memory/
‚îÇ       ‚îî‚îÄ‚îÄ memory.json         # Memoria persistente de conversaciones
‚îÇ
‚îú‚îÄ‚îÄ config/                      # Configuraciones del proyecto
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ settings.py             # Configuraciones generales
‚îÇ
‚îú‚îÄ‚îÄ context/                     # Manejo del contexto de conversaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ context_manager.py      # Gesti√≥n del contexto hist√≥rico
‚îÇ
‚îú‚îÄ‚îÄ tests/                       # Pruebas unitarias e integraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_agent.py           # Tests del agente principal
‚îÇ   ‚îî‚îÄ‚îÄ test_memory.py          # Tests de memoria persistente
‚îÇ
‚îú‚îÄ‚îÄ tools/                       # Herramientas auxiliares
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ code_analyzer.py        # Analizador de c√≥digo
‚îÇ
‚îú‚îÄ‚îÄ ui/                          # Interfaz de usuario
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ terminal_ui.py          # Interfaz de terminal
‚îÇ
‚îî‚îÄ‚îÄ utils/                       # Funciones utilitarias
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ logger.py               # Sistema de logging
    ‚îî‚îÄ‚îÄ validators.py           # Validadores de entrada
```

### Descripci√≥n de m√≥dulos principales

#### `main.py`
Punto de entrada de la aplicaci√≥n. Inicializa el agente PatCode y maneja el bucle principal de interacci√≥n con el usuario.

#### `agents/pat_agent.py`
Contiene la clase `PatAgent`, que gestiona:
- Comunicaci√≥n con la API de Ollama
- Carga y guardado de memoria persistente
- Construcci√≥n del contexto de conversaci√≥n
- Procesamiento de respuestas del modelo

#### `agents/memory/memory.json`
Almacena el historial de conversaciones en formato JSON para mantener el contexto entre sesiones.

#### `config/settings.py`
Define configuraciones globales como:
- Modelo de Ollama a utilizar
- Ruta de memoria
- Par√°metros de la API
- L√≠mites de contexto

#### `context/context_manager.py`
Gestiona el contexto de la conversaci√≥n, incluyendo:
- L√≠mite de mensajes hist√≥ricos
- Formateo del contexto
- Resumen de sesiones largas

#### `tools/code_analyzer.py`
Proporciona herramientas para analizar c√≥digo, detectar patrones y ofrecer sugerencias espec√≠ficas.

#### `utils/logger.py`
Sistema de logging para debug y seguimiento de errores.

---

## üß™ Pruebas

PatCode utiliza `pytest` como framework de pruebas. Las pruebas est√°n organizadas en el directorio `tests/`.

### Ejecutar todas las pruebas

```bash
# Activar el entorno virtual primero
source venv/bin/activate  # En Linux/macOS
# o
venv\Scripts\activate     # En Windows

# Ejecutar pruebas
pytest tests/
```

### Ejecutar pruebas espec√≠ficas

```bash
# Pruebas del agente
pytest tests/test_agent.py

# Pruebas de memoria
pytest tests/test_memory.py

# Ejecutar con verbose
pytest -v tests/
```

### Cobertura de c√≥digo

Para generar un reporte de cobertura:

```bash
pip install pytest-cov
pytest --cov=agents --cov=utils tests/
```

### Estructura de pruebas

```python
# tests/test_agent.py
import pytest
from agents.pat_agent import PatAgent

def test_agent_initialization():
    """Verifica que el agente se inicialice correctamente"""
    agent = PatAgent()
    assert agent.model == "llama3.2:latest"
    assert agent.history == []

def test_memory_persistence():
    """Verifica que la memoria se guarde correctamente"""
    agent = PatAgent()
    agent.ask("Hola")
    assert len(agent.history) > 0
```

### Agregar nuevas pruebas

1. Crea un nuevo archivo en `tests/` con el prefijo `test_`
2. Importa los m√≥dulos necesarios
3. Define funciones de prueba con el prefijo `test_`
4. Usa `assert` para verificar comportamientos esperados

---

## ü§ù Contribuciones

¬°Las contribuciones son bienvenidas! PatCode es un proyecto de c√≥digo abierto y estamos encantados de recibir mejoras de la comunidad.

### C√≥mo contribuir

1. **Fork del repositorio**
   - Haz clic en "Fork" en la parte superior derecha de la p√°gina del repositorio

2. **Clona tu fork**
   ```bash
   git clone https://github.com/TU_USUARIO/Patcode.git
   cd Patcode
   ```

3. **Crea una rama para tu feature**
   ```bash
   git checkout -b feature/mi-nueva-funcionalidad
   ```

4. **Realiza tus cambios**
   - Aseg√∫rate de seguir las convenciones de c√≥digo
   - A√±ade pruebas para nuevas funcionalidades
   - Actualiza la documentaci√≥n si es necesario

5. **Commit de tus cambios**
   ```bash
   git add .
   git commit -m "feat: descripci√≥n clara de los cambios"
   ```

6. **Push a tu fork**
   ```bash
   git push origin feature/mi-nueva-funcionalidad
   ```

7. **Crea un Pull Request**
   - Ve a tu fork en GitHub
   - Haz clic en "New Pull Request"
   - Describe tus cambios detalladamente

### Convenciones de c√≥digo

- **Estilo:** Seguimos [PEP 8](https://pep8.org/) para c√≥digo Python
- **Docstrings:** Utiliza docstrings para documentar funciones y clases
- **Type hints:** Preferimos el uso de type hints cuando sea posible
- **Commits:** Utiliza [Conventional Commits](https://www.conventionalcommits.org/)
  - `feat:` para nuevas funcionalidades
  - `fix:` para correcci√≥n de bugs
  - `docs:` para cambios en documentaci√≥n
  - `test:` para a√±adir o modificar pruebas
  - `refactor:` para refactorizaci√≥n de c√≥digo

### Reportar issues

Si encuentras un bug o tienes una sugerencia:

1. Verifica que no exista un issue similar
2. Crea un nuevo issue con:
   - T√≠tulo descriptivo
   - Descripci√≥n detallada del problema
   - Pasos para reproducir (si aplica)
   - Versi√≥n de Python y Ollama
   - Sistema operativo

### Ideas para contribuir

- üêõ Reportar y corregir bugs
- ‚ú® Proponer nuevas funcionalidades
- üìñ Mejorar la documentaci√≥n
- üåê A√±adir traducciones
- üß™ Aumentar la cobertura de pruebas
- ‚ö° Optimizar el rendimiento

---

## üìÑ Licencia

Este proyecto est√° licenciado bajo la **MIT License**.

```
MIT License

Copyright (c) 2025 Gonza Cba

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

### ¬øQu√© significa esto?

La licencia MIT te permite:

‚úÖ Usar el c√≥digo comercialmente  
‚úÖ Modificar el c√≥digo  
‚úÖ Distribuir el c√≥digo  
‚úÖ Uso privado  
‚úÖ Sublicenciar  

Con la √∫nica condici√≥n de incluir el aviso de copyright y la licencia en todas las copias.

---

## üôè Agradecimientos

- **Anthropic** por la inspiraci√≥n con [Claude Code](https://claude.ai/)
- **Ollama** por proporcionar una plataforma excelente para ejecutar modelos localmente
- **La comunidad open-source** por las bibliotecas y herramientas que hacen posible este proyecto

---

## üîÆ Roadmap

### ‚úÖ Versi√≥n actual (v1.0)
- Interacci√≥n en terminal
- Memoria b√°sica persistente
- Soporte para m√∫ltiples modelos de Ollama

### üöß Pr√≥ximas versiones

#### v1.1 - An√°lisis de proyectos
- Lectura y an√°lisis de carpetas completas
- Navegaci√≥n por estructura de archivos
- B√∫squeda de c√≥digo en proyectos

#### v1.2 - Herramientas de desarrollo
- Ejecuci√≥n de comandos locales (compilar, testear)
- Integraci√≥n con Git (commits autom√°ticos, PRs)
- Linting y formateo autom√°tico

#### v1.3 - Mejoras de UX
- Interfaz visual opcional (Streamlit/Electron)
- Resumen autom√°tico de sesiones largas
- Exportaci√≥n de conversaciones

#### v2.0 - Caracter√≠sticas avanzadas
- Soporte para m√∫ltiples lenguajes de programaci√≥n
- Plantillas de c√≥digo y snippets
- Integraci√≥n con IDEs (VS Code extension)

---

## üìû Contacto y soporte

- **GitHub Issues:** [github.com/gonzacba17/Patcode/issues](https://github.com/gonzacba17/Patcode/issues)
- **Autor:** Gonza Cba
- **Repositorio:** [github.com/gonzacba17/Patcode](https://github.com/gonzacba17/Patcode)

---

## üìö Recursos adicionales

- [Documentaci√≥n de Ollama](https://github.com/ollama/ollama)
- [Gu√≠a de Python](https://docs.python.org/3/)
- [Claude Code de Anthropic](https://claude.ai/code)
- [PEP 8 - Gu√≠a de estilo Python](https://pep8.org/)

**Creado con ‚ù§Ô∏è por Gonza Cba**

Si te gusta PatCode, ¬°no olvides darle una ‚≠ê en GitHub!